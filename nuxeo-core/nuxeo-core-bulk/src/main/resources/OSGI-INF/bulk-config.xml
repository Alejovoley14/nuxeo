<?xml version="1.0"?>
<component name="org.nuxeo.ecm.core.bulk.config" version="1.0.0">

  <require>org.nuxeo.runtime.stream.service</require>

  <extension target="org.nuxeo.ecm.core.bulk" point="actions">
    <action name="setProperties" bulkSize="100" batchSize="25" />
    <action name="setSystemProperties" bulkSize="100" batchSize="25" />
    <action name="csvExport" bulkSize="100" batchSize="50" />
  </extension>

  <extension target="org.nuxeo.runtime.stream.service" point="streamProcessor">
    <!-- Processor used by BulkService to scroll DB -->
    <streamProcessor name="bulkDocumentScroller" class="org.nuxeo.ecm.core.bulk.BulkProcessor" logConfig="bulk"
      defaultConcurrency="1" defaultPartitions="1">
      <option name="scrollBatchSize">200</option>
      <option name="scrollKeepAlive">60</option>
    </streamProcessor>

    <!-- SetProperty processor -->
    <streamProcessor name="setProperties" class="org.nuxeo.ecm.core.bulk.action.SetPropertiesAction" logConfig="bulk"
      defaultConcurrency="1" defaultPartitions="1" />

    <!-- SetSystemProperty processor -->
    <streamProcessor name="setSystemProperties" class="org.nuxeo.ecm.core.bulk.action.SetSystemPropertiesAction"
      logConfig="bulk" defaultConcurrency="1" defaultPartitions="1" />

    <!-- SetSystemProperty processor -->
    <streamProcessor name="csvExport" class="org.nuxeo.ecm.core.bulk.action.CSVExportAction" logConfig="bulk"
      defaultConcurrency="1" defaultPartitions="1" />

  </extension>

</component>
